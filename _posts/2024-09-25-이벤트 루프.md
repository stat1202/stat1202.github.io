---
categories: [면접, 프론트엔드]
tags: [프론트엔드, front-end, 면접, tech-interview, 자바스크립트, javascript]
---

# 비동기와 이벤트 루프

이전 글에서 JavaScript의 특징 중 하나는 싱글 스레드 언어라고 했다. 싱글 스레드로 동작한다면 우리는 브라우저가 필요한 파일을 다운받는 동안 아무 동작도 하지 못하고 기다려야 할 것이다. 하지만 우리사 사용하는 대부분의 웹은 엄청 빠르게 동작한다.
그 이유는 시간이 오래걸리는 작업들은 자바스크립트 엔진이 아닌 브라우저 내부 멀티 스레드인 Web APIs에서 처리되기 때문이다.

메인 스레드가 작업을 요청하면 다른 곳에서 대신 실행하고, 작업이 완료되면 이벤트나 콜백 함수를 받아 결과를 실행하는 방식으로 동작한다.

# 이벤트 루프
이벤트 루프는 앞에서 설명한 동작을 제어해주는 관리자이다. 이를 자세하 적어보자면 콜 스택, 콜백 큐, Web APIs 등을 모니터링하면서 비동기 작업을 관리하고 순차적으로 처리하는 역할을 한다.

이런 이벤트 루프를 이용한 방식을 이벤트 기반 프로그래밍이라고 한다. 프로그래밍의 흐름이 이벤트에 의해 결정되는 방식을 말한다.
이벤트 기반 프로그래밍을 사용하면 비동기 작업을 쉽게 처리할 수 있고, 멀티 스레드 언어에 비해 단순하고 직관적인 코드 작성을 가능하게 한다.

# 이벤트 루프 동작 과정
이벤트 루프는 작업을 모니터링하고 옮기는 역할을 담당한다. 이를 코드로 표현하면 다음과 같다.
```js
// 이벤트 루프의 동작을 나타내는 가상의 코드
while(queue.waitForMessage()){ // 큐에 메시지가 있을 때까지 대기
  queue.processNextMessage(); // 가장 오래된 메시지를 큐에서 꺼내서 호출 스택으로 옮김
}
```

간단하게 3가지의 동작으로 이루어진다.

1. 자바스크립트가 수행해야 할 작업들이 콜 스택에 쌓인다.
2. 만약 콜 스택에 쌓인 작업이 비동기 작업이면 콜백 큐로 이동시켜 작업을 처리한다.
3. 작업이 완료되면 콜 스택에 결과를 옮긴다.



출처 - https://inpa.tistory.com/entry/%F0%9F%94%84-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%A3%A8%ED%94%84-%EA%B5%AC%EC%A1%B0-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC